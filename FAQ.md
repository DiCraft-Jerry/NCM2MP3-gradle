# 常见问题 (FAQ)

## 目录
- [转换失败](#转换失败)
- [元数据问题](#元数据问题)
- [环境问题](#环境问题)
- [性能问题](#性能问题)
- [打包问题](#打包问题)
  - [macOS 打包问题](#macos-打包问题)
  - [Windows 打包问题](#windows-打包问题)
  - [通用打包问题](#通用打包问题)
- [错误信息说明](#错误信息说明)
  - [文件相关错误](#文件相关错误)
  - [环境相关错误](#环境相关错误)
  - [转换过程错误](#转换过程错误)
  - [界面相关错误](#界面相关错误)
- [其他问题](#其他问题)

## 转换失败

如果遇到转换失败的情况，请检查：
1. NCM 文件是否完整
   - 确保文件没有损坏
   - 确保文件是从网易云音乐客户端下载的
   - 确保文件扩展名为 .ncm
2. 是否有足够的磁盘空间
   - 检查目标磁盘的可用空间
   - 建议预留至少原文件大小 2 倍的空间
3. 输出目录是否有写入权限
   - 检查目录权限设置
   - 尝试以管理员权限运行程序
   - 确保目录路径不包含特殊字符

## 元数据问题

如果转换后的 MP3 文件没有正确的元数据，可能是因为：
1. 原始 NCM 文件中的元数据不完整
   - 检查原始文件是否包含完整的音乐信息
   - 尝试重新下载音乐文件
2. 文件权限问题
   - 确保程序有足够的权限读取和写入文件
   - 检查文件是否被其他程序占用
3. 系统编码问题
   - 确保系统使用 UTF-8 编码
   - 检查文件名是否包含特殊字符

## 环境问题

1. Java 环境问题
   - 确保安装了 JDK 8 或更高版本
   - 检查 JAVA_HOME 环境变量是否正确设置
   - 在命令行中运行 `java -version` 验证安装

2. 图形界面问题
   - 如果界面显示异常，尝试更新显卡驱动
   - 确保系统支持 Swing 图形界面
   - 检查系统分辨率设置

## 性能问题

1. 转换速度慢
   - 检查系统资源使用情况
   - 关闭其他占用资源的程序
   - 考虑使用更快的存储设备

2. 内存占用高
   - 检查系统内存使用情况
   - 适当调整 JVM 内存参数
   - 避免同时转换过多文件

## 其他问题

如果您遇到其他问题，请：
1. 检查是否满足环境要求
   - 查看 README.md 中的环境准备部分
   - 确保所有依赖都已正确安装
2. 查看错误日志
   - 检查程序运行日志
   - 查看系统错误日志
3. 在 GitHub Issues 中搜索相关问题
   - 使用关键词搜索类似问题
   - 查看已关闭的 issues 中的解决方案
4. 如果问题仍然存在，请提交新的 Issue
   - 提供详细的错误信息
   - 附上相关的日志文件
   - 描述问题复现步骤

## 打包问题

### macOS 打包问题

1. DMG 打包失败
   - 确保已安装 Xcode 命令行工具
   - 检查 `package-mac.sh` 脚本的执行权限
   - 确保有足够的磁盘空间
   - 检查是否在 macOS 环境下运行

2. 签名问题
   - 确保有有效的开发者证书
   - 检查证书是否过期
   - 验证签名权限设置

### Windows 打包问题

1. EXE 打包失败
   - 确保在 Windows 环境下运行
   - 检查 JDK 环境变量设置
   - 验证 Gradle 版本兼容性
   - 确保有管理员权限

2. 依赖问题
   - 检查所有依赖是否正确安装
   - 验证 Gradle 依赖配置
   - 确保网络连接正常

### 通用打包问题

1. 版本号问题
   - 确保版本号格式正确
   - 检查版本号是否重复
   - 验证版本号更新机制

2. 资源文件问题
   - 确保所有资源文件存在
   - 检查文件路径是否正确
   - 验证文件编码格式

3. 打包环境问题
   - 确保系统满足最低要求
   - 检查磁盘空间是否充足
   - 验证网络连接状态

4. 打包后测试
   - 在不同系统版本上测试
   - 验证所有功能是否正常
   - 检查安装和卸载过程
   - 测试文件关联功能

## 错误信息说明

### 文件相关错误

1. "转换失败文件：xxx"
   - 原因：文件转换过程中出现异常
   - 解决方案：
     - 检查文件是否为有效的 NCM 文件
     - 确保文件没有被损坏
     - 检查文件权限

2. "output文件夹已存在，将复用"
   - 原因：输出目录已存在
   - 解决方案：
     - 这是正常提示，程序会自动使用已存在的目录
     - 如果需要使用新目录，可以手动删除或重命名现有目录

3. "异步任务执行失败,异常：xxx"
   - 原因：多线程转换过程中出现异常
   - 解决方案：
     - 检查系统资源使用情况
     - 减少同时转换的文件数量
     - 检查文件权限和磁盘空间

### 环境相关错误

1. "ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH"
   - 原因：未正确设置 Java 环境变量
   - 解决方案：
     - 安装 JDK 8 或更高版本
     - 设置 JAVA_HOME 环境变量
     - 将 Java 的 bin 目录添加到 PATH 环境变量

2. "ERROR: JAVA_HOME is set to an invalid directory"
   - 原因：JAVA_HOME 环境变量指向了错误的目录
   - 解决方案：
     - 检查 JAVA_HOME 环境变量的值
     - 确保指向正确的 JDK 安装目录

### 转换过程错误

1. "转换中.." 状态长时间不变
   - 原因：转换过程卡住
   - 解决方案：
     - 检查系统资源使用情况
     - 关闭其他占用资源的程序
     - 重启程序重试

2. "转换失败" 状态
   - 原因：文件转换失败
   - 解决方案：
     - 检查文件完整性
     - 确保有足够的磁盘空间
     - 检查输出目录权限

### 界面相关错误

1. 界面显示异常
   - 原因：Swing 图形界面渲染问题
   - 解决方案：
     - 更新显卡驱动
     - 检查系统分辨率设置
     - 尝试使用命令行模式

2. 按钮无响应
   - 原因：界面线程阻塞
   - 解决方案：
     - 关闭程序重新启动
     - 检查系统资源使用情况
     - 使用命令行模式替代 